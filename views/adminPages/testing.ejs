<%- include('../adminLayouts/header.ejs') %>

<%- include('../adminLayouts/pageHeader.ejs') %>

<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Notifications</h2>
            <p>All the notifications for the admin.</p>
        </div>
    </div>
    <div class="card mb-4">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>#ID</th>
                            <th scope="col">Message</th>
                            <th scope="col">Date</th>
                            <th scope="col" class="text-end">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>New order received.</td>
                            <td>10.06.2024</td>
                            <td class="text-end">
                                <a href="#" onclick="markAsRead('1')" class="btn btn-md rounded font-sm">Mark as Read</a>
                                <a href="#" onclick="deleteNotification('1')" class="btn btn-md rounded font-sm text-danger">Delete</a>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>User registered.</td>
                            <td>09.06.2024</td>
                            <td class="text-end">
                                <a href="#" onclick="markAsRead('2')" class="btn btn-md rounded font-sm">Mark as Read</a>
                                <a href="#" onclick="deleteNotification('2')" class="btn btn-md rounded font-sm text-danger">Delete</a>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Product out of stock.</td>
                            <td>08.06.2024</td>
                            <td class="text-end">
                                <a href="#" onclick="markAsRead('3')" class="btn btn-md rounded font-sm">Mark as Read</a>
                                <a href="#" onclick="deleteNotification('3')" class="btn btn-md rounded font-sm text-danger">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<%- include('../adminLayouts/pageFooter.ejs') %>

<script>
    function markAsRead(notificationId) {
        console.log('Marking notification ' + notificationId + ' as read.');
        // Add fetch request to mark as read
    }

    function deleteNotification(notificationId) {
        Swal.fire({
            title: 'Are you sure?',
            text: 'Once deleted, you will not be able to recover this notification!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'No, cancel!',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                console.log('Deleting notification ' + notificationId);
                // Add fetch request to delete notification
            } else if (result.dismiss === Swal.DismissReason.cancel) {
                Swal.fire('Cancelled', 'The notification deletion was cancelled', 'error');
            }
        });
    }
</script>

<%- include('../adminLayouts/footer.ejs') %>
