<%- include('../userLayouts/header.ejs') %>


    <div class="page-wrapper">
        
        <%- include('../userLayouts/pageHeader.ejs') %>

        <main class="main">
        	<div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
        		<div class="container-fluid">
        			<h1 class="page-title">Find Your Perfect Match Here!<span>Shop</span></h1>
        		</div><!-- End .container-fluid -->
        	</div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
                <div class="container-fluid">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Shop</a></li>
                    </ol>
                </div><!-- End .container-fluid -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
                <div class="container-fluid">
        			<div class="toolbox">
        				<div class="toolbox-left">
                            <a href="#" class="sidebar-toggler"><i class="icon-bars"></i>Filters</a>
        				</div><!-- End .toolbox-left -->

                        <div class="toolbox-center">
                            <div class="toolbox-info">
                                Showing <span>12 of 56</span> Products
                            </div><!-- End .toolbox-info -->
                        </div><!-- End .toolbox-center -->

        				<div class="toolbox-right">
        					<div class="toolbox-sort">
        						<label for="sortby">Sort by:</label>
        						<div class="select-custom">
                                    <form action="/sortMethod" method="get" id="sortMethodForm">
                                        <select name="sortby" id="sortby" onchange="submitForm('sortMethodForm')" class="form-control">
                                            <option value="date" selected="selected">Dated</option>
                                            <option value="lowToHigh">Price: low to high</option>
                                            <option value="highToLow">Price: high to low</option>
                                            <option value="aATozZ">aA - zZ</option>
                                            <option value="zZToaA">zZ - aA</option>
                                        </select>
                                    </form>
								</div>
        					</div><!-- End .toolbox-sort -->
        				</div><!-- End .toolbox-right -->
        			</div><!-- End .toolbox -->

                    <div class="products">
                        <div class="row">
                            <% if (product.length > 0) {
                                for (let i = 0; i < product.length; i++) { %>
                            <div class="col-6 col-md-4 col-lg-4 col-xl-3 col-xxl-2">
                                <div class="product">
                                    <figure class="product-media">
                                        <span class="product-label label-new">New</span>
                                        <a href="/product?id=<%= product[i]._id %>&photoNumber=0">
                                            <img src="/assets/images/productImages/<%=product[i].product_image[0] %>" alt="Product image" class="product-image">
                                        </a>

                                        <div class="product-action-vertical">
                                            <a onclick="productAddToWishlist('<%= product[i]._id %>')" onmouseover="this.style.cursor = 'pointer'" class="btn-product-icon btn-wishlist btn-expandable"><span>add to wishlist</span></a>
                                        </div><!-- End .product-action -->

                                        <div class="product-action action-icon-top">
                                            <a onmouseover="this.style.cursor = 'pointer'" class="btn-product btn-cart" onclick="productAddToCart('<%= product[i]._id %>')" ><span>add to cart</span></a>
                                            <a href="popup/quickView.html" class="btn-product btn-quickview" title="Quick view"><span>quick view</span></a>
                                            <!-- <a href="#" class="btn-product btn-compare" title="Compare"><span>compare</span></a> -->
                                        </div><!-- End .product-action -->
                                    </figure><!-- End .product-media -->

                                    <div class="product-body">
                                        <div class="product-cat">
                                            <a href="#"><%= product[i].category %></a>
                                        </div><!-- End .product-cat -->
                                        <h3 class="product-title"><a href="/product"><%= product[i].name %></a></h3><!-- End .product-title -->
                                        <div class="product-price">
                                            ₹ <%= product[i].price %>
                                        </div><!-- End .product-price -->
                                        <div class="ratings-container">
                                            <div class="ratings">
                                                <div class="ratings-val" style="width: 0%;"></div><!-- End .ratings-val -->
                                            </div><!-- End .ratings -->
                                            <span class="ratings-text">( 0 Reviews )</span>
                                        </div><!-- End .rating-container -->

                                        <!-- <div class="product-nav product-nav-dots">
                                            <a href="#" style="background: #cc9966;"><span class="sr-only">Color name</span></a>
                                            <a href="#" class="active" style="background: #ebebeb;"><span class="sr-only">Color name</span></a>
                                        </div>  End .product-nav -->
                                    </div><!-- End .product-body -->
                                </div><!-- End .product -->
                            </div><!-- End .col-sm-6 col-lg-4 col-xl-3 -->
                            <% } } else {%>
                                <p>No Products Available</p>
                            <% } %>
                        </div><!-- End .row -->

                        <div class="load-more-container text-center">
                            <a href="#" class="btn btn-outline-darker btn-load-more">More Products <i class="icon-refresh"></i></a>
                        </div><!-- End .load-more-container -->
                    </div><!-- End .products -->

                    <div class="sidebar-filter-overlay"></div><!-- End .sidebar-filter-overlay -->
                    <aside class="sidebar-shop sidebar-filter">
                        <div class="sidebar-filter-wrapper">
                            <div class="widget widget-clean">
                                <label><i class="icon-close"></i>Filters</label>
                                <a href="#" class="sidebar-filter-clear">Clean All</a>
                            </div><!-- End .widget -->
                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-1" role="button" aria-expanded="true" aria-controls="widget-1">
                                        Category
                                    </a>
                                </h3><!-- End .widget-title -->

                                <div class="collapse show" id="widget-1">
                                    <div class="widget-body">
                                        <div class="filter-items filter-items-count">
                                            <% if (categories.length > 0) { 
                                                for (let i = 0; i < categories.length; i++) { %>
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="cat-<% i %>">
                                                            <label class="custom-control-label" for="cat-1"><%= categories[i].name %></label>
                                                        </div><!-- End .custom-checkbox -->
                                                        <span class="item-count"><% (i+1) * 7 %></span>
                                                    </div><!-- End .filter-item -->
                                            <% } } else { %>
                                                <div class="filter-item">
                                                    <div class="custom-control custom-checkbox">
                                                        <label class="custom-control-label" for="cat-1">No Categories Found</label>
                                                    </div><!-- End .custom-checkbox -->
                                                </div><!-- End .filter-item -->
                                            <% } %>
                                        </div><!-- End .filter-items -->
                                    </div><!-- End .widget-body -->
                                </div><!-- End .collapse -->
                            </div><!-- End .widget -->

                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-2" role="button" aria-expanded="true" aria-controls="widget-2">
                                        Size
                                    </a>
                                </h3><!-- End .widget-title -->

                                <div class="collapse show" id="widget-2">
                                    <div class="widget-body">
                                        <div class="filter-items">
                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="size-1">
                                                    <label class="custom-control-label" for="size-1">XS</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="size-2">
                                                    <label class="custom-control-label" for="size-2">S</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" checked id="size-3">
                                                    <label class="custom-control-label" for="size-3">M</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" checked id="size-4">
                                                    <label class="custom-control-label" for="size-4">L</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="size-5">
                                                    <label class="custom-control-label" for="size-5">XL</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="size-6">
                                                    <label class="custom-control-label" for="size-6">XXL</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->
                                        </div><!-- End .filter-items -->
                                    </div><!-- End .widget-body -->
                                </div><!-- End .collapse -->
                            </div><!-- End .widget -->

                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-3" role="button" aria-expanded="true" aria-controls="widget-3">
                                        Colour
                                    </a>
                                </h3><!-- End .widget-title -->

                                <div class="collapse show" id="widget-3">
                                    <div class="widget-body">
                                        <div class="filter-colors">
                                            <a href="#" style="background: #b87145;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" style="background: #f0c04a;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" style="background: #333333;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" class="selected" style="background: #cc3333;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" style="background: #3399cc;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" style="background: #669933;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" style="background: #f2719c;"><span class="sr-only">Color Name</span></a>
                                            <a href="#" style="background: #ebebeb;"><span class="sr-only">Color Name</span></a>
                                        </div><!-- End .filter-colors -->
                                    </div><!-- End .widget-body -->
                                </div><!-- End .collapse -->
                            </div><!-- End .widget -->

                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-4" role="button" aria-expanded="true" aria-controls="widget-4">
                                        Brand
                                    </a>
                                </h3><!-- End .widget-title -->

                                <div class="collapse show" id="widget-4">
                                    <div class="widget-body">
                                        <div class="filter-items">
                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-1">
                                                    <label class="custom-control-label" for="brand-1">Next</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-2">
                                                    <label class="custom-control-label" for="brand-2">River Island</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-3">
                                                    <label class="custom-control-label" for="brand-3">Geox</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-4">
                                                    <label class="custom-control-label" for="brand-4">New Balance</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-5">
                                                    <label class="custom-control-label" for="brand-5">UGG</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-6">
                                                    <label class="custom-control-label" for="brand-6">F&F</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                            <div class="filter-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="brand-7">
                                                    <label class="custom-control-label" for="brand-7">Nike</label>
                                                </div><!-- End .custom-checkbox -->
                                            </div><!-- End .filter-item -->

                                        </div><!-- End .filter-items -->
                                    </div><!-- End .widget-body -->
                                </div><!-- End .collapse -->
                            </div><!-- End .widget -->

                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-5" role="button" aria-expanded="true" aria-controls="widget-5">
                                        Price
                                    </a>
                                </h3><!-- End .widget-title -->

                                <div class="collapse show" id="widget-5">
                                    <div class="widget-body">
                                        <div class="filter-price">
                                            <div class="filter-price-text">
                                                Price Range:
                                                <span id="filter-price-range"></span>
                                            </div><!-- End .filter-price-text -->

                                            <div id="price-slider"></div><!-- End #price-slider -->
                                        </div><!-- End .filter-price -->
                                    </div><!-- End .widget-body -->
                                </div><!-- End .collapse -->
                            </div><!-- End .widget -->
                        </div><!-- End .sidebar-filter-wrapper -->
                    </aside><!-- End .sidebar-filter -->
                </div><!-- End .container-fluid -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <%- include('../userLayouts/pageFooter.ejs') %>
        
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Sign in / Register Modal -->
    <div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                    </button>

                    <div class="form-box">
                        <div class="form-tab">
                            <ul class="nav nav-pills nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin" role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="false">Register</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="tab-content-5">
                                <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="signin-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="singin-email">Username or email address *</label>
                                            <input type="text" class="form-control" id="singin-email" name="singin-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="singin-password">Password *</label>
                                            <input type="password" class="form-control" id="singin-password" name="singin-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>LOG IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="signin-remember">
                                                <label class="custom-control-label" for="signin-remember">Remember Me</label>
                                            </div><!-- End .custom-checkbox -->

                                            <a href="#" class="forgot-link">Forgot Your Password?</a>
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                                <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="register-email">Your email address *</label>
                                            <input type="email" class="form-control" id="register-email" name="register-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="register-password">Password *</label>
                                            <input type="password" class="form-control" id="register-password" name="register-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>SIGN UP</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="register-policy" required>
                                                <label class="custom-control-label" for="register-policy">I agree to the <a href="#">privacy policy</a> *</label>
                                            </div><!-- End .custom-checkbox -->
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login  btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                            </div><!-- End .tab-content -->
                        </div><!-- End .form-tab -->
                    </div><!-- End .form-box -->
                </div><!-- End .modal-body -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div><!-- End .modal -->

    <script>
        function productAddToWishlist(productId) {
            fetch('/addToWishlist', { // Corrected URL to include userId in the route
                    method: 'post',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ productId: productId }),
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if(data.message == 'Failed') {
                        console.log('user Not Found')
                    } else if (data.message === 'Already Exists') {
                        Swal.fire({
                            icon: 'warning',
                            title: 'Product Already in Wishlist',
                            text: 'The selected product is already in your wishlist.',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#3085d6',
                        });
                    } else if (data.message === 'Success') {
                        Swal.fire({
                            icon: 'success',
                            title: 'Product Added to Wishlist',
                            text: 'The selected product has been added to your wishlist.',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#3085d6',
                            showCancelButton: true,
                            cancelButtonText: 'Go to Wishlist',
                        }).then((result) => {
                            if (result.isConfirmed) {
                                // Reload the page after the user closes the success alert
                                window.location.reload();
                            } else {
                                // Navigate to the wishlist page
                                window.location.href = '/wishlist'; // Update with the actual URL of your wishlist page
                            }
                        });
                    };
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        };

        function productAddToCart (productId, qty) {
            fetch('/addToCart', { // Corrected URL to include userId in the route
                    method: 'post',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ productId: productId, qty: qty}),
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if(data.message == 'Failed') {
                        console.log('user Not Found')
                    } else if (data.message === 'Already Exists') {
                        Swal.fire({
                            icon: 'warning',
                            title: 'Product Already in Cart',
                            text: 'The selected product is already in your Cart.',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#3085d6',
                        });
                    } else if (data.message === 'Not Enough Product') {
                        Swal.fire({
                            icon: 'warning',
                            title: 'There Has Only few Stocks left',
                            text: 'Try selecting a small quantity',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#3085d6',
                        });
                    } else if (data.message === 'Product out of stock') {
                        Swal.fire({
                            icon: 'warning',
                            title: 'There Has No Stocks left.',
                            text: 'Add to Wsihlist to know when the stock available.',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#3085d6',
                        });
                    } else if (data.message === 'Success') {
                        Swal.fire({
                            icon: 'success',
                            title: 'Product Added to Cart',
                            text: 'The selected product has been added to your Cart.',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#3085d6',
                            showCancelButton: true,
                            cancelButtonText: 'Go to Cart',
                        }).then((result) => {
                            if (result.isConfirmed) {
                                // Reload the page after the user closes the success alert
                                window.location.reload();
                            } else {
                                // Navigate to the wishlist page
                                window.location.href = '/cart'; // Update with the actual URL of your wishlist page
                            }
                        });
                    };
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        };

        function submitForm(formId) {
            const form = document.getElementById(formId);
            form.submit();
        }

        // document.addEventListener('DOMContentLoaded', function () {
        //     // Get the select element
        //     const sortSelect = document.getElementById('sortby');

        //     // Add event listener for change event
        //     sortSelect.addEventListener('change', function () {
        //         // Get the selected value
        //         const selectedValue = sortSelect.value;

        //         console.log(selectedValue)

        //         // Call the sorting function with the selected value
        //         sortItems(selectedValue);
        //     });
        // });

        // function sortItems(selectedValue) {
        //     fetch('/category', { // Corrected URL to include userId in the route
        //             method: 'post',
        //             headers: {
        //                 'Content-Type': 'application/json'
        //             },
        //             body: JSON.stringify({ selectedValue: selectedValue }),
        //         })
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error('Network response was not ok');
        //             }
        //             return response.json();
        //         })
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error('Network response was not ok');
        //             }
        //             return response.json();
        //         })
        //         .then(data => {
        //             if(data.message == 'Success') {
        //                 console.log('reached on the function')
        //                 updateProductList(data.productData);
        //             } else {
        //                 console.log('Sorting failed');
        //                 };
        //         })
        //         .catch(error => {
        //             console.error('Error:', error);
        //         });
        // };

        // function updateProductList(productData) {
        //     console.log('reached on the new function')
        //     const productListElement = document.querySelector('.products');
        //     productListElement.innerHTML = ''; // Clear the existing product list

        //     // Check if there are products available
        //     if (productData.length > 0) {
        //         // Loop through the product data
        //         productData.forEach(product => {
        //             // Create elements for each product
        //             const productContainer = document.createElement('div');
        //             productContainer.classList.add('col-6', 'col-md-4', 'col-lg-4', 'col-xl-3', 'col-xxl-2');

        //             const productItem = document.createElement('div');
        //             productItem.classList.add('product');

        //             const productMedia = document.createElement('figure');
        //             productMedia.classList.add('product-media');

        //             // Add product image
        //             const productImage = document.createElement('img');
        //             productImage.src = `/assets/images/productImages/${product.product_image[0]}`;
        //             productImage.alt = 'Product image';
        //             productImage.classList.add('product-image');

        //             // Add product action buttons
        //             const productActions = document.createElement('div');
        //             productActions.classList.add('product-action', 'action-icon-top');

        //             const addToCartBtn = document.createElement('a');
        //             addToCartBtn.classList.add('btn-product', 'btn-cart');
        //             addToCartBtn.onclick = () => productAddToCart(product._id);
        //             addToCartBtn.innerHTML = '<span>add to cart</span>';

        //             const quickViewBtn = document.createElement('a');
        //             quickViewBtn.classList.add('btn-product', 'btn-quickview');
        //             quickViewBtn.href = 'popup/quickView.html';
        //             quickViewBtn.title = 'Quick view';
        //             quickViewBtn.innerHTML = '<span>quick view</span>';

        //             productActions.appendChild(addToCartBtn);
        //             productActions.appendChild(quickViewBtn);

        //             // Append elements to product container
        //             productMedia.appendChild(productImage);
        //             productItem.appendChild(productMedia);
        //             productItem.appendChild(productActions);
        //             productContainer.appendChild(productItem);

        //             // Add product category
        //             const productCat = document.createElement('div');
        //             productCat.classList.add('product-cat');
        //             productCat.innerHTML = `<a href="#">${product.category}</a>`;
        //             productItem.appendChild(productCat);

        //             // Add product title
        //             const productTitle = document.createElement('h3');
        //             productTitle.classList.add('product-title');
        //             productTitle.innerHTML = `<a href="/product">${product.name}</a>`;
        //             productItem.appendChild(productTitle);

        //             // Add product price
        //             const productPrice = document.createElement('div');
        //             productPrice.classList.add('product-price');
        //             productPrice.innerHTML = `₹ ${product.price}`;
        //             productItem.appendChild(productPrice);

        //             // Add ratings
        //             const ratingsContainer = document.createElement('div');
        //             ratingsContainer.classList.add('ratings-container');
        //             ratingsContainer.innerHTML = `
        //                 <div class="ratings">
        //                     <div class="ratings-val" style="width: 0%;"></div>
        //                 </div>
        //                 <span class="ratings-text">( 0 Reviews )</span>`;
        //             productItem.appendChild(ratingsContainer);

        //             // Append product container to product list
        //             productListElement.appendChild(productContainer);
        //         });
        //     } else {
        //         // Display message if no products available
        //         productListElement.innerHTML = '<p>No Products Available</p>';
        //     }
        // };
        
    </script>

<%- include('../userLayouts/footer.ejs') %>