<%- include('../userLayouts/header.ejs') %>


    <div class="page-wrapper">
        
        <%- include('../userLayouts/pageHeader.ejs') %>

        <main class="main">
        	<!-- <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
        		<div class="container">
        			<h1 class="page-title">My Account<span>Shop</span></h1>
        		</div>
        	</div> -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">My Account</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
            	<div class="dashboard">
	                <div class="container">
	                	<div class="row">
	                		<aside class="col-md-4 col-lg-3">
	                			<ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
								    <li class="nav-item">
								        <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="true">Dashboard</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-account-link" data-toggle="tab" href="#tab-account" role="tab" aria-controls="tab-account" aria-selected="false">Account Details</a>
								    </li>
								    <li class="nav-item">
								        <a id="logoutLink" class="nav-link" href="/logout">Sign Out</a>
								    </li>
								</ul>
	                		</aside><!-- End .col-lg-3 -->

	                		<div class="col-md-8 col-lg-9">
	                			<div class="tab-content">
								    <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
								    	<p>Hello <span class="font-weight-normal text-dark"><%- user.name %>,</span></p>

                                        <p>Your Email : <span class="font-weight-normal text-dark"><%- user.email %></span></p>

                                        <p>Your Mobile Number : <span class="font-weight-normal text-dark">
                                            <% if (!user.number) { %>
                                                <a href="#tab-account" class="tab-trigger-link link-underline">Add A Mobile Number</a>
                                            <% } else { %>
                                                <%- user.number  %>
                                            <% } %>
                                        </span></p>

                                        <p>You Have Currently <span class="font-weight-normal text-dark">0</span> Orders</p>

								    	<p>From your account dashboard you can view your <a href="#tab-orders" class="tab-trigger-link link-underline">recent orders</a>, manage your <a href="#tab-address" class="tab-trigger-link">shipping and billing addresses</a>, and <a href="#tab-account" class="tab-trigger-link">edit your password and account details</a>.</p>
								    </div><!-- .End .tab-pane -->

								    <div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
								    	<p>No order has been made yet.</p>
								    	<a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
								    </div><!-- .End .tab-pane -->

								    <div class="tab-pane fade" id="tab-downloads" role="tabpanel" aria-labelledby="tab-downloads-link">
								    	<p>No downloads available yet.</p>
								    	<a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
								    </div><!-- .End .tab-pane -->

								    <div class="tab-pane fade" id="tab-address" role="tabpanel" aria-labelledby="tab-address-link">

										<h3 class="card-title mb-1"><b><u>Billing Address</u></b></h3><!-- End .card-title -->

										<% if (typeof addressPageMessage !== 'undefined') { %>
											<p style="color: red;" class="d-inline-flex p-2 " ><%= addressPageMessage %>*</p>
										<% } %>

								    	<p>The <b>1st address</b> will be used on the checkout page by default.</p>

								    	<div class="row">
											<% if (address.length == 0) { %>
												<p>There has no Address Added</p>
											<% } else { %>
												<% for (let i = 0; i < address.length; i++) { %>
													<div class="col-lg-6">
														<div class="card card-dashboard">
															<div class="card-body">
		
																<p><b>SI : </b><%= i + 1 %><br>
																	<b>Name : </b><%= address[i].name %><br>
																    <b>Mobile Number : </b><%= address[i].mobileNumber %><br>
																    <b>Location : </b><%= address[i].locality %>, <%= address[i].city %>, <%= address[i].state %><br>
																    <b>Pincode : </b><%= address[i].pincode %><br>
																   <% if (address[i].landmark !== '') { %>
																	<b>Landmark : </b><%= address[i].landmark %><br>
																   <% } else { } %>
																   <% if (address[i].mobileNumber2 !== '') { %>
																	<b>Secondary Number : </b><%= address[i].mobileNumber2 %><br>
																   <% } else { } %>
																<a href="#">Edit <i class="icon-edit"></i></a></p>
															</div><!-- End .card-body -->
														</div><!-- End .card-dashboard -->
													</div><!-- End .col-lg-6 -->
		
												<% } %>
											<% } %>

								    		<div class="col-lg-6">
								    			<div class="card card-dashboard">
								    				<div class="card-body">
								    					<h3 class="card-title">Shipping Address</h3><!-- End .card-title -->

														<p>You Can Add upto 5 Adresses(<%= 5 - address.length %> remaining).<br>
														<a href="/addAddress">Add new Address <i class="icon-edit"></i></a></p>
								    				</div><!-- End .card-body -->
								    			</div><!-- End .card-dashboard -->
								    		</div><!-- End .col-lg-6 -->
								    	</div><!-- End .row -->
								    </div><!-- .End .tab-pane -->

								    <div class="tab-pane fade" id="tab-account" role="tabpanel" aria-labelledby="tab-account-link">
								    	<form action="#">

		            						<label>Display Name *</label>
		            						<input type="text" class="form-control" required>
		            						<small class="form-text">This will be how your name will be displayed in the account section and in reviews</small>

		                					<label>Email address *</label>
		        							<input type="email" class="form-control" required>

                                            <label>Mobile Number (leave blank to leave unchanged)</label>
		        							<input type="text" class="form-control">

		            						<label>Current password (leave blank to leave unchanged)</label>
		            						<input type="password" class="form-control">

		            						<label>New password (leave blank to leave unchanged)</label>
		            						<input type="password" class="form-control">

		            						<label>Confirm new password</label>
		            						<input type="password" class="form-control mb-2">

		                					<button type="submit" class="btn btn-outline-primary-2">
			                					<span>SAVE CHANGES</span>
			            						<i class="icon-long-arrow-right"></i>
			                				</button>
			                			</form>
								    </div><!-- .End .tab-pane -->
								</div>
	                		</div><!-- End .col-lg-9 -->
	                	</div><!-- End .row -->
	                </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <%- include('../userLayouts/pageFooter.ejs') %>
            
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			// Get the "Sign Out" link
			var logoutLink = document.getElementById('logoutLink');

			// Add click event listener
			logoutLink.addEventListener('click', function (event) {
				// Prevent the default action of the link
				event.preventDefault();

				// Display SweetAlert confirmation dialog
				Swal.fire({
					title: 'Are you sure you want to sign out?',
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Confirm',
					cancelButtonText: 'Cancel'
				}).then((result) => {
					// If user confirms, proceed with logout
					if (result.isConfirmed) {
						window.location.href = logoutLink.href;
					}
				});
			});
		});
	</script>
    
<%- include('../userLayouts/footer.ejs') %>